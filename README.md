# Physical Computing Project 2025 – IT KMITL
## Synchro (Rhythm Controller Game)

โปรเจกต์นี้พัฒนาระบบเกมจังหวะบน ESP32 ที่เชื่อมกับเว็บ เพื่อใช้เป็นสื่อฝึกสมาธิ ลดการหลุดโฟกัส และดึงผู้เรียนกลับมาจดจ่อกับงานระยะยาว (deep work)

---

## Links
- [Webpage Synchro game](https://ganksterphy.github.io/Synchro/)
- [Video present Synchro game](https://youtube.com)
- [Poster Synchro game](https://youtube.com)

---

## บทคัดย่อ

โครงการ Synchro มีวัตถุประสงค์เพื่อบรรเทาและป้องกันปัญหาการขาดสมาธิที่เกิดจากการใช้สื่อสังคมออนไลน์มากเกินไป การหลุดโฟกัสจากการเรียนหรือกิจกรรมที่กำลังทำ รวมถึงความเบื่อหน่ายและความเครียดที่สัมพันธ์กับการเรียนรู้ ซึ่งหากปล่อยไว้นานอาจส่งผลต่อคุณภาพการเรียนรู้ ประสิทธิภาพการทำงาน และสุขภาพจิตในระยะยาว โดยเฉพาะในกลุ่มนักเรียน/นักศึกษาที่ต้องใช้สมาธิเชิงลึก

แนวคิดคือใช้ “เกมจังหวะ (Rhythm Game)” เป็นสื่อกลางให้ผู้เล่นต้องโฟกัสกับจังหวะดนตรี เวลา และตำแหน่งการกดปุ่มอย่างต่อเนื่อง การเล่นซ้ำช่วยเสริมทักษะ
- การโฟกัสเฉพาะจุด (Focused Attention)
- การตอบสนองที่แม่นยำ (Accurate Response)

ซึ่งสามารถถ่ายทอดกลับไปใช้กับการเรียนหรือการทำงานจริงได้

---

## ขั้นตอนการพัฒนา

1. วางแผนและจัดซื้ออุปกรณ์ที่จำเป็นทั้งหมด  
2. ออกแบบหน้าเว็บไซต์ด้วย Figma และกำหนด CI (สี, ฟอนต์, โลโก้)  
3. พัฒนาเว็บไซต์ส่วน Frontend เพื่อแสดง Documentation และผลลัพธ์จากการเชื่อมต่อกับ ESP32  
4. ต่อวงจรทั้งหมด เช่น LCD, ESP32, ปุ่มกด (Push Button)  
5. เขียนโปรแกรมและอัปโหลดขึ้น ESP32 ให้สามารถแสดงผลเกมและตอบสนองการกดปุ่มได้  
6. สร้างเครื่องมืออัปโหลดเพลงลง SD Card และหน้าสำหรับสร้างแมปเกมจังหวะแบบ JSON เพื่อให้ AI หรือผู้ใช้สร้างโน้ตได้ง่าย  
7. ปรับแก้โค้ดและเชื่อม ESP32 เข้ากับ Web Server เพื่อดึงคะแนนจากบอร์ดมาแสดงบนเว็บและสรุปผล  
8. ปรับปรุงให้สามารถเพิ่มเพลงบน SD Card ได้ และทำให้ชิ้นงานมีความสมบูรณ์ขึ้น

---

## Input / Output ของระบบ

### Input
1. การกดปุ่มของผู้เล่น (4 ปุ่มสี)
2. เพลง (ไฟล์ MP3/WAV บน microSD)
3. Map/โน้ตของเพลง (เวลาที่ควรกด)
4. การตั้งค่าจากเว็บ (เลือกเพลง, เลือกความยาก, ปรับ BPM)

### Output
1. เสียงเพลงจากลำโพง
2. การแสดง Combo, Accuracy และสถิติบนเว็บ
3. สรุปผลการเล่นในแต่ละเพลงเก็บไว้ดูย้อนหลัง

---

## สิ่งที่ได้ลองทำ

1. เชื่อมต่อจอ LCD TFT Color module เข้ากับ ESP32  
2. ต่อปุ่มกด (Push Button) ให้ตรงกับการแสดงผลบนจอ  
3. เชื่อมต่อ ESP32 เข้ากับ Web Server แล้วส่งค่าการกดปุ่มไปแสดงบนเว็บ  
4. ออกแบบหน้าแสดงผลบนจอสี (LCD)  
5. Config เว็บไซต์ให้สามารถเชื่อมกับ ESP32 ได้  
6. อัปโหลดเพลงผ่านหน้าเว็บแล้วนำไปใช้เล่นจริง  
7. สร้างเครื่องมือบนเว็บสำหรับสร้างแมปปุ่มกด Rhythm และอัปโหลดไปยัง SD Card

---

## อุปสรรคที่เจอ

1. แผนแรกจะใช้ Arduino UNO R4 เชื่อม Web Server กับจอแต่ทำได้ยาก  
2. การต่อปุ่ม Push Button เข้ากับ ESP32 ครั้งแรกไม่ทำงาน  
3. SD Card Adapter ต่อแล้วไม่เจอการ์ด  
4. การเชื่อมต่อ Web Server มีปัญหาเรื่องการสื่อสารกับ ESP32 
5. อุปกรณ์ด้านเสียงมีข้อจำกัด ทำให้เล่นเพลงจากเว็บแล้วส่งลง SD Card ไม่ได้

### วิธีแก้ปัญหา

1. เปลี่ยนจาก Arduino UNO R4 ไปใช้ ESP32 แทน เพราะมีตัวอย่างและเอกสารอ้างอิงมากกว่า  
2. พบว่า Breadboard จ่ายไฟแค่ครึ่งเดียว จึงต้องจ่ายไฟให้ครบทั้งแผง  
3. เปลี่ยนการจ่ายไฟให้ SD Card Adapter จาก 3V เป็น 5V  
4. ปรับ JavaScript ฝั่งเว็บให้เก็บ Cookie และทำ Handshaking เพื่อตรวจสอบการเชื่อมต่อกับ ESP32  
5. เพิ่ม Amplifier GF 1002 เพื่อขยายเสียงจาก ESP32 และใช้ SD Card เป็นตัวกลางเก็บเพลงที่อัปโหลดจากเว็บ

### สิ่งที่ทำไม่ได้ตามแผน

1. เดิมตั้งใจใช้ Arduino R4 แต่เปลี่ยนเป็น ESP32  
2. ใช้ ESP32 เล่นเพลงทั้งหมดแทน  
3. ระบบเล่นได้ไม่กี่เพลงพร้อมกัน  
4. UI ของหน้าเกมยังไม่หลากหลาย  
5. การอัปเดตแบบ Realtime ยังไม่สมบูรณ์

---

## Hardware

1. **Sensors & Actuators**
   - Push Buttons 4 ตัว  
   - TFT LCD ขนาด 3.2" (Color module)  
   - SD Card Adapter  

2. **Modules**
   - ESP32  

3. **Tools**
   - Arduino IDE  
   - สาย USB-C / Micro USB  
   - Breadboard  
   - Jumper Wires  
   - Powerbank

---

## Libraries / Modules ที่ใช้

- `WiFi.h`
- ESP32 Dev Module
- `WebServer`
- `TFT_eSPI`
- `SD.h`

---

## การทำงาน / วิธีเล่น

1. เปิดระบบ หน้า Start Menu จะแจ้งให้กดปุ่มเพื่อเริ่มเกม  
2. ผู้ใช้เลือกเพลงจากหน้าเว็บ รอระบบเชื่อมไปยัง ESP32 และจอ LCD  
3. ระบบเริ่มนับถอยหลังก่อนเริ่มเพลง  
4. กดปุ่มให้ตรงกับจังหวะ/สีที่ตกลงมาจากด้านบน  
5. เมื่อจบเพลง ระบบสรุปผลการเล่นบนเว็บ  
6. สามารถเลือกเล่นเพลงใหม่และดู History การเล่นได้

---

## รูปภาพชิ้นงาน

![Synchro Controller](/SynchroController/Teacher.png)

---

## Contributors

| StudentID | Name                                             | Responsibility        |
|-----------|--------------------------------------------------|------------------------|
| 67070069  | นายธนัทภัทร พรหมทอง (ตะวัน)                    | Web Backend / Arduino  |
| 67070117  | นางสาวพิชฎา แก้วศิริ (นาน่า)                   | Web Frontend / Poster  |
| 67070137  | นายภูริ ประชาสุขสิน (ภูริ)                      | Web Backend / Arduino  |
| 67070146  | นางสาวยัสมิน่า ฟาริส ยาซีน นาเซอร์ (มีน่า)    | Web Frontend / Poster  |

---

## นำเสนอ

![Teacher](/SynchroController/Teacher.png)

รศ.ดร. ปานวิทย์ ธุวะนุติ  
อาจารย์ประจำคณะเทคโนโลยีสารสนเทศ  
สถาบันเทคโนโลยีพระจอมเกล้าเจ้าคุณทหารลาดกระบัง

---

## Tools

- **Arduino IDE:** ใช้เขียนโปรแกรม C/C++ และอัปโหลดขึ้น ESP32  
- **Visual Studio Code:** ใช้พัฒนาเว็บ (HTML, CSS, JavaScript) และจัดการโครงสร้างโปรเจกต์
